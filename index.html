<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apartman Maliyet Hesaplama — Tilda/CodePen</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-50">
<div id="root" class="container mx-auto p-4"></div>
<script type="text/babel">

const { useState, useMemo, useEffect, useRef } = React;
const Calculator = (p)=> React.createElement('span', {title:'Calculator'}, '🧮');
const TrendingUp = (p)=> React.createElement('span', {title:'TrendingUp'}, '📈');
const PieChart = (p)=> React.createElement('span', {title:'PieChart'}, '🥧');
const Droplets = (p)=> React.createElement('span', {title:'Droplets'}, '💧');
const Plus = (p)=> React.createElement('span', {title:'Plus'}, '+');
const Trash2 = (p)=> React.createElement('span', {title:'Trash'}, '🗑️');
const Users = (p)=> React.createElement('span', {title:'Users'}, '👥');




const VRG = {
  SI: 0.14, II: 0.01, GV: 0.15, DV: 0.00759, SS: 0.2075, IS: 0.02,
  SE: 0.075, SSE: 0.075, IK: 0.0225
};

const HVZ = {
  m: { i: 6930, a: 3760, ad: 'Manuel Kimyasal Dozaj' },
  o: { 
    ad: 'Otomatik Dozaj Sistemi',
    t: { '25': { i: 15865, a: 11815 }, 't': { i: 12450, a: 8590 } }
  }
};

const AY = ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'];

const suF = (m) => m <= 20 ? m * 40.56 = 40 ? 811.2 + (m - 20) * 99.765 : 2806.5 + (m - 40) * 142.53;

const nb = (n, t) => t === 'e' ? n / 0.77866 / 0.71491;

const pMal = (p) => {
  if (p.t === 'y') {
    const nm = p.s * p.nu;
    const bm = nb(nm, 't');
    const si = bm * VRG.SI, ss = bm * VRG.SS, is = bm * VRG.IS;
    return { nm, bm, si, ss, ta+ ss + is, pg.floor(p.s / 7.5) };
  }
  const bm = nb(p.nm, p.t);
  if (p.t === 't') {
    const si = bm * VRG.SI, ss = bm * VRG.SS, is = bm * VRG.IS;
    return { nm.nm, bm, si, ss, ta+ ss + is, pg: 30 };
  }
  const se = bm * VRG.SE, sse = bm * VRG.SSE, ik = bm * VRG.IK;
  return { nm.nm, bm, si+ ik, ta+ sse + ik, pg: 30 };
};

const PS = ({ per, setPer, inp, setInp }) => {
  const [y, setY] = useState({ ad: '', t: 't', s: '', nm: '', nu: '98.20' });

  const pEkle = () => {
    if (!y.ad.trim()) return alert('Personel adı girin');
    if (y.t === 'y' && (!y.s || !y.nu)) return alert('Çalışma saati ve ücret girin');
    if (y.t !== 'y' && !y.nm) return alert('Net maaş girin');
    const p = y.t === 'y' ? { id.now(), ad.ad, t.t, s(y.s) || 0, nu(y.nu) || 0 }
      : { id.now(), ad.ad, t.t, nm(y.nm) || 0 };
    setPer([...per, p]);
    setY({ ad: '', t: 't', s: '', nm: '', nu: '98.20' });
  };

  const tMal = () => {
    if (!inp.bt) return 0;
    const zo = inp.pzo / 100;
    let top = 0;
    per.forEach(p => {
      const sn = pMal(p);
      const ba = new Date(inp.bt).getMonth();
      const oa = ba !== 0 ? 12 - ba : 0, os = ba !== 0 ? ba : 12;
      const oam = sn.ta * oa;
      const zp = p.t === 'y' ? { ...p, nu.nu * (1 + zo) } : { ...p, nm.nm * (1 + zo) };
      const zs = pMal(zp);
      top += oam + zs.ta * os;
    });
    if (per.length > 0 && inp.pby === 'a') top += 21600;
    return top;
  };

  return (
    <div className="mb-6 bg-white rounded-lg p-6 border shadow-sm">
      <div className="flex items-center gap-3 mb-4">
        <Users className="w-6 h-6 text-blue-600" />
        <h2 className="text-xl font-bold">Personel Giderleri</h2>
      </div>

      <div className="mb-4 bg-slate-50 rounded p-4 border">
        <label className="text-sm font-medium block mb-3">SGK Beyanname</label>
        <div className="space-y-3">
          <label className="flex items-start gap-3 cursor-pointer p-4 border-2 bg-white rounded hover-gray-50">
            <input type="radio" value="a" checked={inp.pby === 'a'} 
              onChange={(e) => setInp(p => ({...p, pby.target.value}))} className="w-4 h-4 mt-0.5" />
            <div className="flex-1">
              <span className="text-sm font-bold block mb-2">Aylık Beyanname</span>
              <p className="text-xs text-gray-700 mb-2">Muhasebeci beyanname hazırlar</p>
              <div className="bg-red-50 border border-red-200 rounded px-3 py-2">
                <p className="text-xs text-red-700 font-semibold">1.800 TL/ay</p>
              </div>
            </div>
          </label>
          <label className="flex items-start gap-3 cursor-pointer p-4 border-2 border-green-300 bg-white rounded hover-green-50">
            <input type="radio" value="k" checked={inp.pby === 'k'}
              onChange={(e) => setInp(p => ({...p, pby.target.value}))} className="w-4 h-4 mt-0.5" />
            <div className="flex-1">
              <span className="text-sm font-bold block mb-2">Kolay İşveren (Önerilen)</span>
              <p className="text-xs text-gray-700 mb-2">SGK otomatik oluşturur</p>
              <div className="bg-green-50 border border-green-200 rounded px-3 py-2">
                <p className="text-xs text-green-700 font-semibold">Ücretsiz</p>
              </div>
            </div>
          </label>
        </div>
      </div>

      {inp.bt && new Date(inp.bt).getMonth() !== 0 && (
        <div className="bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 mb-4">
          <div className="flex items-center justify-between">
            <div>
              <h3 className="text-lg font-bold text-green-900 mb-1">Ocak Zam Oranı</h3>
              <p className="text-sm text-green-700">Ocak personel zammı</p>
            </div>
            <div className="flex items-center gap-3 bg-white rounded px-4 py-3 border-2 border-green-400">
              <input type="number" value={inp.pzo}
                onChange={(e) => setInp(p => ({...p, pzo(e.target.value) || 0}))}
                className="w-24 px-3 py-2 border-2 border-green-300 rounded text-center font-bold text-xl" />
              <span className="text-2xl font-bold">%</span>
            </div>
          </div>
        </div>
      )}

      <div className="bg-gray-50 rounded p-4 mb-4">
        <h3 className="text-sm font-semibold mb-3">Yeni Personel</h3>
        <div className="grid grid-cols-1 md-cols-6 gap-3">
          <input type="text" placeholder="Ad" value={y.ad}
            onChange={(e) => setY({...y, ad.target.value})} className="border rounded px-3 py-2 text-sm" />
          <select value={y.t} onChange={(e) => setY({...y, t.target.value})} className="border rounded px-3 py-2 text-sm">
            <option value="t">Tam Zamanlı</option>
            <option value="y">Yarı Zamanlı</option>
            <option value="e">Emekli</option>
          </select>
          {y.t === 'y' ? (
            <>
              <input type="number" placeholder="Saat" value={y.s}
                onChange={(e) => setY({...y, s.target.value})} className="border rounded px-3 py-2 text-sm" />
              <input type="number" placeholder="Net/saat" value={y.nu}
                onChange={(e) => setY({...y, nu.target.value})} className="border rounded px-3 py-2 text-sm" />
            </>
          ) : (
            <input type="number" placeholder="Net maaş" value={y.nm}
              onChange={(e) => setY({...y, nm.target.value})} 
              className="border rounded px-3 py-2 text-sm" />
          )}
          <button onClick={pEkle} className="bg-blue-600 text-white rounded px-4 py-2 hover-blue-700 text-sm flex items-center justify-center gap-2">
            <Plus size={16} /> Ekle
          </button>
        </div>
      </div>

      {per.map(p => {
        if (!inp.bt) {
          return (
            <div key={p.id} className="border-2 rounded p-4 mb-3 bg-white">
              <div className="flex justify-between mb-3 pb-3 border-b">
                <div>
                  <h4 className="font-bold text-lg">{p.ad}</h4>
                  <span className="text-sm text-gray-600">{p.t === 't' ? 'Tam' .t === 'y' ? 'Yarı' : 'Emekli'}</span>
                  <p className="text-sm text-blue-600 mt-2">
                    {p.t === 'y' ? `${p.s}h × ${p.nu.toLocaleString('tr-TR')} TL` : `${p.nm.toLocaleString('tr-TR')} TL`}
                  </p>
                </div>
                <button onClick={() => setPer(per.filter(x => x.id !== p.id))} className="text-red-600 p-2">
                  <Trash2 size={20} />
                </button>
              </div>
              <div className="bg-amber-50 border border-amber-300 rounded p-3 text-center">
                <p className="text-sm text-amber-800">Başlangıç tarihi gerekli</p>
              </div>
            </div>
          );
        }
        
        const sn = pMal(p);
        const zo = inp.pzo / 100;
        const ba = new Date(inp.bt).getMonth();
        const oa = ba !== 0 ? 12 - ba : 0, os = ba !== 0 ? ba : 12;
        const zp = p.t === 'y' ? { ...p, nu.nu * (1 + zo) } : { ...p, nm.nm * (1 + zo) };
        const zs = pMal(zp);
        const oam = sn.ta * oa, osm = zs.ta * os;
        
        return (
          <div key={p.id} className="border-2 rounded p-4 mb-3 bg-white">
            <div className="flex justify-between mb-3 pb-3 border-b">
              <div>
                <h4 className="font-bold text-lg">{p.ad}</h4>
                <span className="text-sm text-gray-600">{p.t === 't' ? 'Tam' .t === 'y' ? 'Yarı' : 'Emekli'}</span>
              </div>
              <button onClick={() => setPer(per.filter(x => x.id !== p.id))} className="text-red-600 p-2">
                <Trash2 size={20} />
              </button>
            </div>
            <div className="bg-blue-50 rounded p-4">
              <div className={`grid ${ba !== 0 ? 'grid-cols-3' : 'grid-cols-2'} gap-4`}>
                {ba !== 0 && (
                  <div className="bg-white rounded p-3 border">
                    <p className="text-xs text-gray-600 mb-2">{AY[ba]}-Aralık ({oa} ay)</p>
                    <p className="text-sm font-bold">{sn.bm.toLocaleString('tr-TR')} TL</p>
                    <p className="text-xs text-blue-600 font-bold mt-2">= {oam.toLocaleString('tr-TR')} TL</p>
                  </div>
                )}
                <div className="bg-white rounded p-3 border border-green-200">
                  <p className="text-xs text-gray-600 mb-2">Ocak-{AY[(ba - 1 + 12) % 12]} ({os} ay)</p>
                  <p className="text-sm font-bold text-green-700">{zs.bm.toLocaleString('tr-TR')} TL</p>
                  <p className="text-xs text-green-600 font-bold mt-2">= {osm.toLocaleString('tr-TR')} TL</p>
                </div>
                <div className="bg-gradient-to-br from-purple-500 to-indigo-600 rounded p-3 text-white">
                  <p className="text-xs opacity-90 mb-1">YILLIK</p>
                  <p className="text-lg font-bold">{(oam + osm).toLocaleString('tr-TR')} TL</p>
                </div>
              </div>
            </div>
          </div>
        );
      })}

      {per.length === 0 && (
        <div className="text-center py-8 border-2 border-dashed rounded">
          <Users className="w-12 h-12 mx-auto mb-2 text-gray-400" />
          <p className="text-gray-500">Personel eklenmedi</p>
        </div>
      )}

      {per.length > 0 && (
        <div className="bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded p-4">
          <div className="grid grid-cols-3 gap-4">
            <div><p className="text-sm opacity-90">Personel</p><p className="text-xl font-bold">{per.length}</p></div>
            <div><p className="text-sm opacity-90">Aylık</p><p className="text-xl font-bold">{(tMal() / 12).toLocaleString('tr-TR')} TL</p></div>
            <div><p className="text-sm opacity-90">Yıllık</p><p className="text-xl font-bold">{tMal().toLocaleString('tr-TR')} TL</p></div>
          </div>
          {inp.pby === 'a' && (
            <div className="mt-3 pt-3 border-t border-white/30">
              <p className="text-xs opacity-90">* Muhasebe ücreti dahil (21.600 TL/yıl)</p>
            </div>
          )}
        </div>
      )}
    </div>
  );
};

const HS = ({ inp, setInp }) => {
  const hHes = () => {
    const m = inp.hm || 0;
    const ea = Math.min(Math.max(inp.h25 || 0, 0), 3);
    const os = Math.min(Math.max(inp.h26 || 0, 0), 9);
    if (m === 0 || (ea + os) === 0) return { yt: 0, ea: 0, os: 0 };
    
    let ak = inp.hs === 'm' ? (HVZ.m.a / 100) * m : (HVZ.o.t[inp.hot].a / 100) * m;
    const km = m * 0.07;
    const as = suF(km);
    const at = ak + as + 200 + ((m / 100) * 4000);
    const em = at * ea;
    const aat = at * (1 + inp.ao / 100);
    const om = aat * os;
    
    return { km, sa.hs === 'm' ? HVZ.m.ad .o.ad, ea, os, at, aat, em, om, yt+ om };
  };

  const h = hHes();

  return (
    <div className="mb-6 bg-white rounded p-6 border shadow-sm">
      <div className="flex items-center gap-3 mb-4">
        <Droplets className="w-6 h-6 text-blue-600" />
        <h2 className="text-xl font-bold">Havuz</h2>
      </div>
      
                <div className="grid grid-cols-1 md-cols-4 gap-4 mb-4">
        <div>
          <label className="text-sm font-medium">Hacim (m³)</label>
          <input type="number" value={inp.hm} onChange={(e) => setInp(p => ({...p, hm(e.target.value) || 0}))}
            className="w-full px-3 py-2 border rounded" />
        </div>
        <div>
          <label className="text-sm font-medium">2025 Kullanım (Ay)</label>
          <input type="number" value={inp.h25} onChange={(e) => setInp(p => ({...p, h25(e.target.value) || 0}))}
            className="w-full px-3 py-2 border rounded" />
        </div>
        <div>
          <label className="text-sm font-medium">2026 Kullanım (Ay)</label>
          <input type="number" value={inp.h26} onChange={(e) => setInp(p => ({...p, h26(e.target.value) || 0}))}
            className="w-full px-3 py-2 border rounded" />
        </div>
        <div>
          <label className="text-sm font-medium">Sistem</label>
          <select value={inp.hs} onChange={(e) => setInp(p => ({...p, hs.target.value}))}
            className="w-full px-3 py-2 border rounded">
            <option value="m">Manuel</option>
            <option value="o">Otomatik</option>
          </select>
        </div>
      </div>

      {inp.hs === 'o' && (
        <div className="mb-4 flex gap-4">
          <label className="flex items-center gap-2">
            <input type="radio" value="25" checked={inp.hot === '25'}
              onChange={(e) => setInp(p => ({...p, hot.target.value}))} />
            <span className="text-sm">25kg Ambalaj</span>
          </label>
          <label className="flex items-center gap-2">
            <input type="radio" value="t" checked={inp.hot === 't'}
              onChange={(e) => setInp(p => ({...p, hot.target.value}))} />
            <span className="text-sm">Tanker</span>
          </label>
        </div>
      )}

      {inp.hm > 0 && h.yt > 0 && (
        <>
          <div className="bg-blue-50 rounded p-4 mb-4 text-sm">
            <div className="mb-2"><strong>Sistem:</strong> {h.sa}</div>
            <div>Su Kaybı: <strong>{h.km.toFixed(1)} m³/ay</strong></div>
          </div>

          <div className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded p-5">
            <h3 className="text-sm font-semibold mb-4 opacity-90">HAVUZ MALİYET</h3>
            <div className="grid grid-cols-3 gap-4">
              <div className="bg-white/20 backdrop-blur rounded p-4">
                <p className="text-xs opacity-90 mb-1">Artış Öncesi</p>
                <p className="text-sm font-semibold mb-2">({h.ea} ay)</p>
                <div className="border-t border-white/30 pt-2 mt-2">
                  <p className="text-xs opacity-75">Aylık: {h.at.toLocaleString('tr-TR')} TL</p>
                  <p className="text-lg font-bold mt-1">{h.em.toLocaleString('tr-TR')} TL</p>
                </div>
              </div>
              <div className="bg-white/20 backdrop-blur rounded p-4">
                <p className="text-xs opacity-90 mb-1">Artış Sonrası</p>
                <p className="text-sm font-semibold mb-2">({h.os} ay)</p>
                <div className="border-t border-white/30 pt-2 mt-2">
                  <p className="text-xs opacity-75">Aylık: {h.aat.toLocaleString('tr-TR')} TL</p>
                  <p className="text-lg font-bold mt-1">{h.om.toLocaleString('tr-TR')} TL</p>
                </div>
              </div>
              <div className="bg-white rounded p-4 text-blue-600">
                <p className="text-xs mb-1">Yıllık</p>
                <p className="text-sm font-semibold mb-2">({h.ea + h.os} ay)</p>
                <div className="border-t border-blue-200 pt-2 mt-2">
                  <p className="text-2xl font-bold">{h.yt.toLocaleString('tr-TR')} TL</p>
                </div>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

const BLG = ['Demirtaş', 'Kargıcak', 'Kestel', 'Mahmutlar', 'Şehir merkezi', 'Tosmur', 'Konaklı', 'Avsallar'];
const YFB = ['Demirtaş', 'Kargıcak', 'Mahmutlar', 'Konaklı', 'Avsallar'];

function ApartmanMaliyetHesaplama() {
  const [inp, setInp] = useState({
    bt: '', at: '', blg: '', ds: 0, ks: 0, as: 0, hm: 0, h25: 0, h26: 0, hs: 'm', hot: '25',
    oas: 'yok', ja: 0, jb: 0, jy: 0, oe: 0, os: 0, tm: 0, yp: '', bb: 0, tb: 0,
    ao: 0, pzo: 0, pby: 'a'
  });
  const [per, setPer] = useState([]);

  const hDM = (am) => {
    if (!inp.bt || !inp.at) return am * 12;
    const b = new Date(inp.bt), a = new Date(inp.at);
    const sa = (a.getFullYear() - b.getFullYear()) * 12 + (a.getMonth() - b.getMonth());
    const aa = 12 - sa;
    return (am * sa) + (am * (1 + inp.ao / 100) * aa);
  };

  const pTop = () => {
    let t = 0;
    per.forEach(p => {
      const sn = pMal(p);
      const ba = new Date(inp.bt).getMonth();
      const oa = ba !== 0 ? 12 - ba : 0, os = ba !== 0 ? ba : 12;
      const zp = p.t === 'y' ? {...p, nu.nu * (1 + inp.pzo / 100)} : {...p, nm.nm * (1 + inp.pzo / 100)};
      const zs = pMal(zp);
      t += (sn.ta * oa) + (zs.ta * os);
    });
    if (per.length > 0 && inp.pby === 'a') t += 21600;
    return t;
  };

  const hTop = () => {
    const m = inp.hm || 0;
    const ea = Math.min(Math.max(inp.h25 || 0, 0), 3);
    const os = Math.min(Math.max(inp.h26 || 0, 0), 9);
    if (m === 0 || (ea + os) === 0) return 0;
    const ak = inp.hs === 'm' ? (HVZ.m.a / 100) * m : (HVZ.o.t[inp.hot].a / 100) * m;
    const km = m * 0.07;
    const at = ak + suF(km) + 200 + ((m / 100) * 4000);
    return (at * ea) + (at * (1 + inp.ao / 100) * os);
  };

  const asTop = inp.as > 0 ? (() => {
    const yb = YFB.includes(inp.blg);
    const i5 = yb ? 1200 : 1000;
    const ab = inp.ks <= 5 ? i5 * inp.as : (i5 + (inp.ks - 5) * 150) * inp.as;
    return hDM(ab);
  })() : 0;

  const jTop = inp.ja > 0 ? hDM((inp.jb + inp.jy) * inp.ja / 12) : 0;
  const oaTop = hDM(inp.oe + inp.os);
  const ygTop = inp.tm + inp.bb + inp.tb;
  const sig = inp.oas ? (() => {
    const sm = { 'yok': 280, 'havuz-sauna-spor': 420, 'kapali-havuz': 630, 'guvenlik-resepsiyon': 750 };
    return inp.ds * (sm[inp.st] || 0);
  })() : 0;

  const yTop = (() => {
    if (!inp.yp || inp.ds === 0) return 0;
    const dbu = inp.yp === 't' ? 350 : 200;
    return dbu * inp.ds * 12;
  })();

  const gTop = pTop() + asTop + jTop + hTop() + oaTop + yTop + sig + ygTop;

  const gd = [
    { k: 'Personel', t() }, { k: 'Asansör', t}, { k: 'Jeneratör', t},
    { k: 'Havuz', t() }, { k: 'Ortak Alan', t}, { k: 'Yönetim', t},
    { k: 'Sigorta', t}, { k: 'Yıllık', t}
  ].filter(g => g.t > 0);

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md-6">
      <style>{`
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
          -webkit-appearance;
          margin: 0;
        }
        input[type="number"] {
          -moz-appearance;
          appearance;
        }
      `}</style>
      <div className="max-w-7xl mx-auto">
        <div className="bg-white rounded-xl shadow-lg border p-6 mb-6">
          <div className="flex items-center gap-3 mb-6 pb-4 border-b">
            <Calculator className="w-8 h-8 text-blue-600" />
            <h1 className="text-3xl font-bold">Apartman İşletme Maliyeti</h1>
          </div>

          <div className="bg-white rounded p-6 mb-6 border-2 border-blue-300">
            <h3 className="text-lg font-bold text-blue-900 mb-4">Bütçe Dönemi</h3>
            <div className="grid grid-cols-1 md-cols-2 gap-6">
              <div>
                <label className="text-sm font-medium block mb-2">Başlangıç Tarihi</label>
                <input type="date" value={inp.bt}
                  onChange={(e) => setInp(p => ({...p, bt.target.value}))}
                  className="w-full px-4 py-3 border-2 border-blue-300 rounded" />
              </div>
              <div>
                <label className="text-sm font-medium block mb-2">Artış Tarihi</label>
                <input type="date" value={inp.at}
                  onChange={(e) => setInp(p => ({...p, at.target.value}))}
                  className="w-full px-4 py-3 border-2 border-amber-300 rounded" />
              </div>
            </div>
            {inp.at && (
              <div className="mt-6 bg-amber-50 border-2 border-amber-300 rounded-xl p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="text-lg font-bold text-amber-900 mb-1">Maliyet Artış Beklentisi</h3>
                    <p className="text-sm text-amber-700">Artış sonrası genel artış oranı</p>
                  </div>
                  <div className="flex items-center gap-3 bg-white rounded px-4 py-3 border-2 border-amber-400">
                    <input type="number" value={inp.ao}
                      onChange={(e) => setInp(p => ({...p, ao(e.target.value) || 0}))}
                      className="w-24 px-3 py-2 border-2 border-amber-300 rounded text-center font-bold text-xl" />
                    <span className="text-2xl font-bold text-amber-900">%</span>
                  </div>
                </div>
              </div>
            )}
          </div>

          <PS per={per} setPer={setPer} inp={inp} setInp={setInp} />

          <div className="mb-6 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Genel Bilgiler</h2>
            <div className="grid grid-cols-1 md-cols-2 gap-4 mb-4">
              <div>
                <label className="text-sm font-medium">Bölge</label>
                <select value={inp.blg} onChange={(e) => setInp(p => ({...p, blg.target.value}))}
                  className="w-full px-3 py-2 border rounded">
                  <option value="">Seçin</option>
                  {BLG.map(b => <option key={b} value={b}>{b}</option>)}
                </select>
              </div>
              <div>
                <label className="text-sm font-medium">Daire Sayısı</label>
                <input type="number" value={inp.ds}
                  onChange={(e) => setInp(p => ({...p, ds(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
            </div>
            <div className="mb-4">
              <label className="flex items-center gap-3 cursor-pointer p-4 border-2 border-blue-200 rounded">
                <input type="checkbox" checked={inp.oas}
                  onChange={() => setInp(p => ({...p, oas: !p.oas}))} className="w-5 h-5" />
                <span className="text-sm font-semibold">Ortak alanları sigortalamak istiyorum</span>
              </label>
            </div>
            {inp.oas && (
              <div className="mt-4 bg-blue-50 rounded p-4 border">
                <label className="text-sm font-medium block mb-3">Sosyal Tesisler</label>
                <div className="space-y-2">
                  {[
                    { v: 'yok', l: 'Sosyal tesis yok' },
                    { v: 'havuz-sauna-spor', l: 'Havuz, sauna, spor salonu' },
                    { v: 'kapali-havuz', l: 'Kapalı havuz' },
                    { v: 'guvenlik-resepsiyon', l: '24 saat güvenlik ve resepsiyon' }
                  ].map(i => (
                    <label key={i.v} className="flex items-center gap-3 cursor-pointer p-3 border-2 bg-white rounded">
                      <input type="radio" name="st" value={i.v} checked={inp.st === i.v}
                        onChange={(e) => setInp(p => ({...p, st.target.value}))} className="w-4 h-4" />
                      <span className="text-sm font-medium">{i.l}</span>
                    </label>
                  ))}
                </div>
              </div>
            )}
          </div>

          <div className="mb-6 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Asansör</h2>
            <div className="grid grid-cols-1 md-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">Asansör Sayısı</label>
                <input type="number" value={inp.as}
                  onChange={(e) => setInp(p => ({...p, as(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
              {inp.as > 0 && (
                <div>
                  <label className="text-sm font-medium">Kat Sayısı</label>
                  <input type="number" value={inp.ks}
                    onChange={(e) => setInp(p => ({...p, ks(e.target.value) || 0}))}
                    className="w-full px-3 py-2 border rounded" />
                </div>
              )}
            </div>
            {inp.as > 0 && inp.blg && (
              <div className="mt-4 bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                <p className="text-sm text-blue-800">
                  <strong>Bilgi:</strong> {inp.blg} bölgesi ilk 5 kat aylık{' '}
                  <strong>{YFB.includes(inp.blg) ? '1.200' : '1.000'} TL</strong>, sonra +150 TL/kat
                </p>
              </div>
            )}
          </div>

          <div className="mb-6 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Jeneratör</h2>
            <div className="grid grid-cols-1 md-cols-3 gap-4">
              <div>
                <label className="text-sm font-medium">Adet</label>
                <input type="number" value={inp.ja}
                  onChange={(e) => setInp(p => ({...p, ja(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
              {inp.ja > 0 && (
                <>
                  <div>
                    <label className="text-sm font-medium">Bakım (Yıllık/Adet)</label>
                    <input type="number" value={inp.jb}
                      onChange={(e) => setInp(p => ({...p, jb(e.target.value) || 0}))}
                      className="w-full px-3 py-2 border rounded" />
                  </div>
                  <div>
                    <label className="text-sm font-medium">Yakıt (Yıllık/Adet)</label>
                    <input type="number" value={inp.jy}
                      onChange={(e) => setInp(p => ({...p, jy(e.target.value) || 0}))}
                      className="w-full px-3 py-2 border rounded" />
                  </div>
                </>
              )}
            </div>
          </div>

          <HS inp={inp} setInp={setInp} />

          <div className="mb-6 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Ortak Alan Aylık</h2>
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">Elektrik</label>
                <input type="number" value={inp.oe}
                  onChange={(e) => setInp(p => ({...p, oe(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
              <div>
                <label className="text-sm font-medium">Su</label>
                <input type="number" value={inp.os}
                  onChange={(e) => setInp(p => ({...p, os(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
            </div>
          </div>

          <div className="mb-6 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Yıllık Giderler</h2>
            <div className="grid grid-cols-3 gap-4">
              <div>
                <label className="text-sm font-medium">Temizlik</label>
                <input type="number" value={inp.tm}
                  onChange={(e) => setInp(p => ({...p, tm(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
              <div>
                <label className="text-sm font-medium">Bahçe</label>
                <input type="number" value={inp.bb}
                  onChange={(e) => setInp(p => ({...p, bb(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
              <div>
                <label className="text-sm font-medium">Tamir</label>
                <input type="number" value={inp.tb}
                  onChange={(e) => setInp(p => ({...p, tb(e.target.value) || 0}))}
                  className="w-full px-3 py-2 border rounded" />
              </div>
            </div>
          </div>

          <div className="mb-8 bg-white rounded p-6 border shadow-sm">
            <h2 className="text-xl font-bold mb-4">Profesyonel Yönetim</h2>
            <select value={inp.yp} onChange={(e) => setInp(p => ({...p, yp.target.value}))}
              className="w-full px-4 py-3 border-2 rounded text-lg font-semibold mb-4">
              <option value="">Paket Seçin</option>
              <option value="t">Tam Yönetim - 350 TL/daire/ay</option>
              <option value="m">Muhasebe - 200 TL/daire/ay</option>
            </select>

            {inp.yp === 't' && (
              <div className="bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border-2 border-orange-200">
                <h3 className="text-2xl font-bold mb-2">Tam Yönetim</h3>
                <p className="text-3xl font-bold text-orange-600 mb-3">350 TL <span className="text-lg text-gray-600">/ daire / ay</span></p>
                <div className="space-y-2 mb-4">
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Personel ve bakım takibi</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Mali işlemler ve resmi süreçler</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Raporlama ve şeffaf yönetim</span>
                  </div>
                </div>
              </div>
            )}

            {inp.yp === 'm' && (
              <div className="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200">
                <h3 className="text-2xl font-bold mb-2">Muhasebe ve Resmi İşler</h3>
                <p className="text-3xl font-bold text-blue-600 mb-3">200 TL <span className="text-lg text-gray-600">/ daire / ay</span></p>
                <div className="space-y-2 mb-4">
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Gelir-gider ve aidat takibi</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Toplantı hazırlığı ve tutanak</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">Bildirimler ve resmi yazışmalar</span>
                  </div>
                  <div className="flex items-start gap-2">
                    <span className="text-green-600">✓</span>
                    <span className="text-sm">İcra ve dava desteği</span>
                  </div>
                </div>
              </div>
            )}

            {inp.yp && inp.ds > 0 && (
              <div className="mt-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-xl p-5">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm opacity-90 mb-1">Aylık Toplam</p>
                    <p className="text-3xl font-bold">
                      {((inp.yp === 't' ? 350 : 200) * inp.ds).toLocaleString('tr-TR')} TL
                    </p>
                  </div>
                  <div className="text-right">
                    <p className="text-sm opacity-90 mb-1">Yıllık</p>
                    <p className="text-2xl font-bold">{yTop.toLocaleString('tr-TR')} TL</p>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-lg border p-6">
          <div className="flex items-center gap-3 mb-6 pb-4 border-b">
            <TrendingUp className="w-8 h-8 text-green-600" />
            <h2 className="text-2xl font-bold">Maliyet Özeti</h2>
          </div>

          <div className="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 mb-6 text-white">
            <div className="text-sm opacity-90 mb-1">Yıllık Toplam</div>
            <div className="text-4xl font-bold">{gTop.toLocaleString('tr-TR')} TL</div>
            <div className="text-sm opacity-90 mt-2">Aylık Ort: {(gTop / 12).toLocaleString('tr-TR')} TL</div>
          </div>

          <div className="grid grid-cols-1 lg-cols-2 gap-6 mb-6">
            {gd.map((g, i) => {
              const y = (g.t / (gTop || 1) * 100).toFixed(1);
              return (
                <div key={i} className="border rounded p-4">
                  <div className="flex justify-between items-center mb-2">
                    <span className="font-semibold">{g.k}</span>
                    <span className="text-sm text-gray-500">{y}%</span>
                  </div>
                  <div className="text-xl font-bold text-blue-600 mb-2">{g.t.toLocaleString('tr-TR')} TL</div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div className="bg-blue-500 h-2 rounded-full" style={{ width: `${y}%` }} />
                  </div>
                </div>
              );
            })}
          </div>

          <div className="bg-gray-50 rounded p-6">
            <div className="flex items-center gap-2 mb-4">
              <PieChart className="w-5 h-5" />
              <h3 className="font-semibold">Gider Dağılımı</h3>
            </div>
            <div className="space-y-2">
              {gd.map((g, i) => (
                <div key={i} className="flex justify-between text-sm">
                  <span className="text-gray-600">{g.k}</span>
                  <span className="font-semibold">{(g.t / (gTop || 1) * 100).toFixed(1)}%</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(ApartmanMaliyetHesaplama));
</script>
</body>
</html>
